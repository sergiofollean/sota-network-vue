(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf9538ca"],{c547:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-tf-selector",{attrs:{charts:e.tfs,width:e.width,height:e.height,period:e.period},on:{selected:e.on_selected}}),a("trading-vue",{ref:"tradingVue",attrs:{data:e.chart,overlays:e.overlays,width:e.width,height:e.height,"title-txt":e.symbol,toolbar:!0,tf:e.period}})],1)},n=[],i=a("b85c"),s=a("1da1"),c=(a("96cf"),a("a9e3"),a("07ac"),a("a434"),a("b0c0"),a("d81d"),a("4160"),a("159b"),a("0042")),h=a.n(c),d=a("5cd2"),o=a.n(d),u=a("b704"),l=a.n(u),m={name:"futureGraph",components:{TradingVue:h.a},props:{symbolName:{type:String,default:"BTCUSDT"},symbolPeriod:{type:String,default:"1m"},width:{type:Number,default:500},height:{type:Number,default:600},apiKey:{type:String},apiSecret:{type:String}},created:function(){return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},data:function(){return{overlays:Object.values(l.a),timer:"",symbol:this.symbolName,period:this.symbolPeriod,tfs:{"1m":{},"3m":{},"5m":{},"15m":{},"1h":{},"4h":{}},chart:new c["DataCube"]({chart:{tf:"1m",data:[]}}),wk:1,wss:[],token:this.apiKey,secret:this.apiSecret,binance:new o.a({apiKey:this.token,apiSecret:this.secret})}},methods:{on_selected:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,s,c,h,d,u,l,m,p,f;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.binance=new o.a({apiKey:t.apiKey,apiSecret:t.apiSecret}),t.wss.length>0){r=Object(i["a"])(t.wss);try{for(r.s();!(n=r.n()).done;)s=n.value,s(),t.wss.splice(0,1)}catch(b){r.e(b)}finally{r.f()}}return t.chart.set("chart.data",[]),t.period=e.name,t.chart.set("chart.tf",e.name),a.next=7,t.binance.futuresCandles({symbol:t.symbol,interval:t.period});case 7:return c=a.sent,t.chart.set("chart.data",c.map((function(e){return[e.openTime,Number(e.open),Number(e.high),Number(e.low),Number(e.close),Number(e.volume)]}))),t.chart.del("Trades"),t.chart.del("EMA"),t.chart.del("Ichi"),t.chart.add("onchart",{name:"EMA 33",type:"EMA",data:[],settings:{length:33,lineWidth:1}}),t.chart.add("onchart",{name:"EMA 55",type:"EMA",data:[],settings:{length:55,lineWidth:2}}),t.chart.add("onchart",{name:"EMA 120",type:"EMA",data:[],settings:{length:120,lineWidth:3}}),t.chart.add("onchart",{name:"Ichi",type:"Ichi",data:[]}),a.next=18,t.binance.ws.futuresCandles(t.symbol,t.period,(function(e){t.chart.data.chart.data[t.chart.data.chart.data.length-1].length&&t.chart.data.chart.data[t.chart.data.chart.data.length-1][0]===e.startTime?t.chart.data.chart.data.splice(t.chart.data.chart.data.length-1,1,[e.startTime,Number(e.open),Number(e.high),Number(e.low),Number(e.close),Number(e.volume)]):t.chart.data.chart.data.push([e.startTime,Number(e.open),Number(e.high),Number(e.low),Number(e.close),Number(e.volume)])}));case 18:if(h=a.sent,t.wss.length>0){d=Object(i["a"])(t.wss);try{for(d.s();!(u=d.n()).done;)l=u.value,l(),t.wss.splice(0,1)}catch(b){d.e(b)}finally{d.f()}}if(t.wss.push(h),t.$refs.tradingVue.resetChart(),!(t.apiKey&&t.apiKey.length>0&&t.apiSecret&&t.apiSecret.length>0)){a.next=30;break}return a.next=25,t.binance.futuresAllOrders({symbol:t.symbol});case 25:m=a.sent,p=[],f=[],m.forEach((function(e){if("FILLED"===e.status){var a="BUY"===e.side?1:0,r="BUY"===e.side?e.positionSide.substr(0,1):"Sell";f[e.orderId]?f[e.orderId].push(e):f[e.orderId]=[e];var n=t.findNearestCandle(e.time);n&&p.push([Number(n[0]),Number(a),Number(e.avgPrice),r])}})),t.chart.add("onchart",{name:"Trades",type:"TradesPlus",data:p,settings:{"z-index":10}});case 30:case"end":return a.stop()}}),a)})))()},findNearestCandle:function(e){var t=0,a=this.chart.data.chart.data[1][0]-this.chart.data.chart.data[0][0],r=this.chart.data.chart.data[t];while(e-r[0]>0)r=this.chart.data.chart.data[t++];return r[0]-e<a?this.chart.data.chart.data[t++]:null}},watch:{symbolName:function(e,t){this.symbol=e,this.on_selected({i:0,name:"1m"})},apiSecret:function(e,t){this.secret=e,this.on_selected({i:0,name:"1m"})},apiKey:function(e,t){this.token=e,this.on_selected({i:0,name:"1m"})}}},p=m,f=a("2877"),b=Object(f["a"])(p,r,n,!1,null,null,null);t["a"]=b.exports},d9a3:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("future-graph",{attrs:{width:1200,height:800,"symbol-name":"QTUMUSDT","symbol-period":"1m","api-key":e.apiKey,"api-secret":"rJZ80K7NEyGRrhZHgqR5IwNZBBFd54ihQZKdmX4gYDy14lIB2NgTI03iMMXCtxTa"}}),a("p",[e._v(e._s(e.apiKey))]),a("button",{on:{click:e.setNewValue}},[e._v("Set new value")])],1)},n=[],i=a("c547"),s={components:{futureGraph:i["a"]},data:function(){return{apiKey:"cIOx48OYVU8ixZ6C7ZmXhxMDOdAcTOnO49Qk9drn3QfppGttCf00VR3Z2Mj4kNGR"}},methods:{setNewValue:function(){this.apiKey="cIOx48OYVU8ixZ6C7ZmXhxMDOdAcTOnO49Qk9drn3QfppGttCf00VR3Z2Mj4kNGR"}}},c=s,h=a("2877"),d=Object(h["a"])(c,r,n,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-cf9538ca.ad3d40ec.js.map