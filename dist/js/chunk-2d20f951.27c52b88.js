(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20f951"],{b3f0:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-tf-selector",{attrs:{charts:t.tfs,width:this.$props.width,height:this.$props.height,period:this.period},on:{selected:t.on_selected}}),a("trading-vue",{ref:"tradingVue",attrs:{data:t.chart,overlays:t.overlays,width:this.$props.width,height:this.$props.height,"title-txt":this.symbol,toolbar:!0,tf:this.period}})],1)},n=[],i=a("1da1"),h=(a("96cf"),a("a9e3"),a("b0c0"),a("d81d"),a("a434"),a("4160"),a("159b"),a("0042")),s=a.n(h),c=a("5cd2"),d=a.n(c),o=a("b704"),u=a.n(o),l={name:"graph",components:{TradingVue:s.a},props:{symbolName:{type:String,default:"BTCUSDT"},symbolPeriod:{type:String,default:"1m"},width:{type:Number,default:500},height:{type:Number,default:600},apiKey:{type:String},apiSecret:{type:String}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.binance=new d.a({apiKey:t.apiKey,apiSecret:t.apiSecret});case 1:case"end":return e.stop()}}),e)})))()},data:function(){return{overlays:[u.a["EMA"],u.a["Ichi"],u.a["LongShortTrades"]],timer:"",symbol:this.symbolName,period:this.symbolPeriod,tfs:{"1m":{},"3m":{},"5m":{},"15m":{},"1h":{},"4h":{}},binance:null,chart:new h["DataCube"]({chart:{tf:"1m",data:[]}}),wk:1,ws:null}},methods:{on_selected:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.chart.set("chart.data",[]),!e.ws){a.next=4;break}return a.next=4,e.ws();case 4:return e.period=t.name,e.chart.set("chart.tf",t.name),a.next=8,e.binance.candles({symbol:e.symbol,interval:e.period});case 8:if(r=a.sent,e.chart.set("chart.data",r.map((function(t){return[t.openTime,Number(t.open),Number(t.high),Number(t.low),Number(t.close),Number(t.volume)]}))),e.chart.del("Trades"),e.chart.del("EMA"),e.chart.del("Ichi"),e.chart.add("onchart",{name:"EMA 33",type:"EMA",data:[],settings:{length:33,lineWidth:1}}),e.chart.add("onchart",{name:"EMA 55",type:"EMA",data:[],settings:{length:55,lineWidth:2}}),e.chart.add("onchart",{name:"EMA 120",type:"EMA",data:[],settings:{length:120,lineWidth:3}}),e.chart.add("onchart",{name:"Ichi",type:"Ichi",data:[]}),e.ws=e.binance.ws.candles(e.symbol,e.period,(function(t){e.chart.data.chart.data[e.chart.data.chart.data.length-1][0]===t.startTime?e.chart.data.chart.data.splice(e.chart.data.chart.data.length-1,1,[t.startTime,Number(t.open),Number(t.high),Number(t.low),Number(t.close),Number(t.volume)]):e.chart.data.chart.data.push([t.startTime,Number(t.open),Number(t.high),Number(t.low),Number(t.close),Number(t.volume)])})),e.$refs.tradingVue.resetChart(),!(e.apiKey&&e.apiKey.length>0&&e.apiSecret&&e.apiSecret.length>0)){a.next=26;break}return a.next=22,e.binance.allOrders({symbol:e.symbol});case 22:n=a.sent,i=[],n.forEach((function(t){if("FILLED"===t.status){var a="BUY"===t.side?1:3,r=t.cummulativeQuoteQty,n=t.executedQty,h=e.findNearestCandle(t.time);h&&i.push([h[0],a,r/n,r,h[1],h[2],h[3],h[4]])}})),e.chart.add("onchart",{name:"Trades",type:"LongShortTrades",data:i,settings:{"z-index":10,showLabel:!0}});case 26:case"end":return a.stop()}}),a)})))()},findNearestCandle:function(t){var e=0,a=this.chart.data.chart.data[1][0]-this.chart.data.chart.data[0][0],r=this.chart.data.chart.data[e];while(t-r[0]>0)r=this.chart.data.chart.data[e++];return r[0]-t<a?this.chart.data.chart.data[e++]:null}}},m=l,p=a("2877"),b=Object(p["a"])(m,r,n,!1,null,null,null);e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-2d20f951.27c52b88.js.map